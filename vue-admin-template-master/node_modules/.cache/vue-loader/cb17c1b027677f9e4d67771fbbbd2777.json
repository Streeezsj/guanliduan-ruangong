{"remainingRequest":"D:\\vue管理端\\软件工程\\vue-admin-template-master\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue管理端\\软件工程\\vue-admin-template-master\\src\\views\\UserControll\\adduser.vue?vue&type=style&index=0&id=72f4339e&lang=scss&scoped=true&","dependencies":[{"path":"D:\\vue管理端\\软件工程\\vue-admin-template-master\\src\\views\\UserControll\\adduser.vue","mtime":1654951554144},{"path":"D:\\vue管理端\\软件工程\\vue-admin-template-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue管理端\\软件工程\\vue-admin-template-master\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\vue管理端\\软件工程\\vue-admin-template-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\vue管理端\\软件工程\\vue-admin-template-master\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue管理端\\软件工程\\vue-admin-template-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue管理端\\软件工程\\vue-admin-template-master\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubGluZSB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9CgouYm94IHsKICBtYXJnaW4tbGVmdDogMjAwcHg7CiAgaGVpZ2h0OiA4NTBweDsKICB3aWR0aDogNzAwcHg7CiAgYm9yZGVyOiBzb2xpZCByZ2IoMTg3LCAxODYsIDE4Nyk7Cn0KCi5hdmF0YXItdXBsb2FkZXIgLmVsLXVwbG9hZCB7CiAgYm9yZGVyOiAzcHggZGFzaGVkICNkZWNmY2Y7CiAgYm9yZGVyLXJhZGl1czogNnB4OwogIGN1cnNvcjogcG9pbnRlcjsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQouYXZhdGFyLXVwbG9hZGVyIC5lbC11cGxvYWQ6aG92ZXIgewogIGJvcmRlci1jb2xvcjogIzQwOWVmZjsKfQouYXZhdGFyLXVwbG9hZGVyLWljb24gewogIGZvbnQtc2l6ZTogMjhweDsKICBjb2xvcjogIzhjOTM5ZDsKICB3aWR0aDogMTc4cHg7CiAgaGVpZ2h0OiAxNzhweDsKICBsaW5lLWhlaWdodDogMTc4cHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Ci5hdmF0YXIgewogIHdpZHRoOiAxNzhweDsKICBoZWlnaHQ6IDE3OHB4OwogIGRpc3BsYXk6IGJsb2NrOwp9Cg=="},{"version":3,"sources":["adduser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiQA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"adduser.vue","sourceRoot":"src/views/UserControll","sourcesContent":["<template>\n  <div class=\"box\" shadow=\"never\">\n    <el-form :model=\"user\" label-width=\"180px\" :rules=\"rules\" ref=\"ruleForm\">\n      <el-form-item></el-form-item>\n      <el-form-item label=\"名称：\" prop=\"name\">\n        <el-input\n          v-model=\"user.name\"\n          style=\"width: 400px\"\n          placeholder=\"请输入内容\"\n        />\n      </el-form-item>\n\n      <el-form-item label=\"用户名称：\" prop=\"username\">\n        <el-input\n          v-model=\"user.username\"\n          style=\"width: 400px\"\n          placeholder=\"请输入内容\"\n        />\n      </el-form-item>\n\n      <el-form-item label=\"用户密码：\" prop=\"password\">\n        <el-input\n          v-model=\"user.password\"\n          style=\"width: 400px\"\n          placeholder=\"请输入内容\"\n        />\n      </el-form-item>\n\n      <el-form-item label=\"用户性别：\">\n        <el-radio-group v-model=\"user.sex\">\n          <el-radio :label=\"1\">男</el-radio>\n          <el-radio :label=\"0\">女</el-radio>\n        </el-radio-group>\n      </el-form-item>\n\n      <el-form-item label=\"用户权限：\" prop=\"authority\">\n        <el-select v-model=\"user.authority\" placeholder=\"请选择权限级别\">\n          <el-option label=\"超级管理员\" value=\"超级管理员\"></el-option>\n          <el-option label=\"普通管理员\" value=\"普通管理员\"></el-option>\n          <el-option label=\"普通用户\" value=\"普通用户\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"电话：\" prop=\"phone\">\n        <el-input\n          v-model.number=\"user.phone\"\n          style=\"width: 400px\"\n          placeholder=\"请输入内容\"\n        />\n      </el-form-item>\n      <el-form-item label=\"邮箱：\" prop=\"email\">\n        <el-input\n          v-model=\"user.email\"\n          style=\"width: 400px\"\n          placeholder=\"请输入内容\"\n        />\n      </el-form-item>\n\n    <el-form-item label=\"用户状态：\" prop=\"status\">\n        <el-select v-model=\"user.status\" placeholder=\"请选择用户状态\">\n          <el-option label=\"状态1\" value=\"1\"></el-option>\n          <el-option label=\"状态0\" value=\"0\"></el-option>\n        </el-select>\n      </el-form-item>\n\n       <!-- 上传图片 -->\n      <el-form-item label=\"上传图片：\">\n        <el-upload\n          class=\"avatar-uploader\"\n          action=\"http://120.77.145.204:8021/uploadFile\"\n          :show-file-list=\"true\"\n          :on-success=\"handleAvatarSuccess\"\n          :before-upload=\"beforeAvatarUpload\"\n        >\n          <img v-if=\"user.portrait\" :src=\"user.portrait\" class=\"avatar\" />\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          <div slot=\"tip\" class=\"el-upload__tip\">\n            只能上传jpg/png文件，且不超过500kb\n          </div>\n        </el-upload>\n      </el-form-item>\n      <!-- ------------------------------ -->\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"onSubmit\">添加</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport addusercontroll from \"@/api/usercontroller\";\nexport default {\n  data() {\n    //用户密码\n    var num = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error(\"密码不能为空\"));\n      }\n\n      setTimeout(() => {\n        const Password = /^[a-zA-Z]\\w{5,17}$/;\n        if (!Password.test(value)) {\n          callback(\n            new Error(\n              \"请输入以字母开头，长度在6-18之间，只能包含字符、数字和下划线。\"\n            )\n          );\n        } else {\n          callback();\n        }\n      }, 1000);\n    };\n    //用户权限\n    var statuss = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error(\"内容不能为空\"));\n      }\n      setTimeout(() => {\n        if (!Number.isInteger(value)) {\n          callback(new Error(\"请输入数字值\"));\n        } else {\n          if (value > 1 || value < 0) {\n            callback(new Error(\"请输入数字值1或者0\"));\n          } else {\n            callback();\n          }\n        }\n      }, 1000);\n    };\n    //邮箱验证\n    var checkemail = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error(\"内容不能为空\"));\n      }\n      const regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;\n      if (!regEmail.test(value)) {\n        callback(new Error(\"输入正确的邮箱格式\"));\n      } else {\n        callback();\n      }\n    };\n    //电话判断\n    var checkphone = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error(\"手机号不能为空\"));\n      }\n      const reg = /^1[34578]\\d{9}$/;\n      if (!reg.test(value)) {\n        callback(new Error(\"输入手机格式不正确\"));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      user: {\n        sex: 0,\n        authority: \"\",\n        portrait:\"\"\n      },\n\n      rules: {\n        name: [\n          { required: true, message: \"请输入名称\", trigger: \"blur\" },\n          {\n            min: 2,\n            max: 10,\n            message: \"长度在 2 到 10 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n        username: [\n          { required: true, message: \"请输入用户名称\", trigger: \"blur\" },\n          {\n            min: 2,\n            max: 10,\n            message: \"长度在 2 到 10 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n        password: [{ validator: num, required: true, trigger: \"blur\" }],\n         status: [{ required: true, message: \"请选择用户状态\", trigger: \"change\" }],\n        email: [{ validator: checkemail, required: true, trigger: \"blur\" }],\n        phone: [{ validator: checkphone, required: true, trigger: \"blur\" }],\n        authority: [\n          { required: true, message: \"请选择权限级别\", trigger: \"change\" },\n        ],\n      },\n    };\n  },\n  methods: {\n    onSubmit() {\n      //获取from结点，验证字段\n      this.$refs.ruleForm.validate(async (success) => {\n        //如果全部字段符合条件\n        if (success) {\n          var vm = this;\n          addusercontroll\n            .aduser(vm.user)\n            .then(function (resp) {\n              vm.$message({\n                message: \"添加成功!\",\n                type: \"success\",\n              });\n              vm.$router.go(-1);\n            })\n            .catch(function (error) {\n              vm.$message.error(\"添加失败\");\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n      //上传图片相关回调\n    handleAvatarSuccess(res, file) {\n      console.log('sdsa',res);\n      console.log('sdsa',res.data);\n      this.user.portrait = res.data.path;\n      console.log(\"上传图片成功\", this.user.portrait);\n    },\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === \"image/jpeg\";\n      const isLt2M = file.size / 1024 / 1024 < 2;\n      console.log(\"beforeAvatarUpload\", file);\n      if (!isJPG) {\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\n      }\n      if (!isLt2M) {\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n      }\n      return isJPG && isLt2M;\n    },\n    //  onSubmit() {\n    //   var vm = this\n    //   addusercontroll.aduser(vm.user)\n    //   .then(function(resp) {\n    //     // vm.user = resp.data.code\n    //     // console.log('qqq',vm.user);\n    //     \tthis.$message({\n    //     \t  message: '添加成功!',\n    //     \t  type: 'success'\n    //       })\n\n    //     vm.$router.go(-1)\n    //     console.log('qqqqqqqqqqq');\n    //   })\n    //   .catch(function(error) {\n    //         console.log('aaaaaaa');\n    //   \t\t\t vm.$message.error('添加失败')\n    //         //  this.$router.go(-1)\n    //   })\n    // }\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.line {\n  text-align: center;\n}\n\n.box {\n  margin-left: 200px;\n  height: 850px;\n  width: 700px;\n  border: solid rgb(187, 186, 187);\n}\n\n.avatar-uploader .el-upload {\n  border: 3px dashed #decfcf;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n</style>\n\n"]}]}